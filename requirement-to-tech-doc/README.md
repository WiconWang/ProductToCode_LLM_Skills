# 需求到技术文档转换器

一个专为 Claude Code 设计的 Skill，将原始产品需求转化为可执行的技术文档。

## 核心价值

| 问题 | 解决方案 |
|------|----------|
| 需求描述不清晰 | 逐条澄清，确保完全理解 |
| 设计与实际代码脱节 | 基于项目现有结构设计 |
| 文档与实现不符 | 多轮问答验证，确保准确 |
| 过度设计 | 只实现需求明确的功能 |

## 工作流程

```
┌─────────────────────────────────────────────────────────────────┐
│                    需求到技术文档转换流程                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐     │
│   │  需求   │───▶│  澄清   │───▶│  调研   │───▶│  设计   │     │
│   │  输入   │    │  确认   │    │  项目   │    │  方案   │     │
│   └─────────┘    └─────────┘    └─────────┘    └─────────┘     │
│        │              │              │              │            │
│        ▼              ▼              ▼              ▼            │
│   原始需求文档    明确所有歧义    基于现有代码    技术方案        │
│   或口头描述     用户确认答案     只用已有技术    Markdown文档     │
│                                                                 │
│                          ┌─────────┐                           │
│                          │ 验证    │◀──────────────────────────┤
│                          │ 确认    │    多轮问答               │
│                          └─────────┘    用户审核               │
│                               │                               │
│                               ▼                               │
│                          定稿归档                              │
│                          docs/年/月日-功能.md                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## 使用方法

### 激活 Skill

直接向 Claude 表达你的需求：

```
"我有一个需求，请帮我转化为技术文档"
"帮我把这份需求文档变成可执行的技术方案"
"这是一个新产品功能，请设计技术实现方案"
```

### Step 1: 提供原始需求

你可以通过以下方式提供需求：

- **文件路径**：需求文档的完整路径
- **粘贴内容**：直接粘贴需求内容
- **口头描述**：描述你想要的功能

**示例：**
```
我有一个需求文档，位于：docs/2026-02/价值观提炼系统-V7.0.md

请基于 haierren-server 项目的 cm-statis 包设计后端
基于 wk_x_h5 项目设计前端
```

### Step 2: 澄清确认

Claude 会逐条询问不明确的地方：

```
在开始设计前，我有几个问题需要澄清：

1. 关于"数据来源"：
   - 已有3个数据源：社区分析、访谈分析、档案分析
   - 是否都需要支持？还是只支持部分？

2. 关于"生成统计"：
   - 统计结果需要保存吗？还是仅展示？

请逐一回答...
```

### Step 3: 验证审核

完成文档后，Claude 会引导你进行多轮验证：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 文档验证 - 第一轮
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 首页功能是否完整？
   - 通用头部区域：已在方案 2.1.2 中描述
   - 面包屑导航：已在方案 2.1.2 中描述
   - 数据统计区域：已在方案 2.1.3 中描述

❓ 请确认：以上描述是否符合你的预期？(y/n)

2. API 接口是否正确？
   - POST /api/value/analyze：已在方案 3.2.1 中定义
   - GET /api/value/stats：已在方案 3.2.2 中定义

❓ 这些接口是否符合你的需求？(y/n)
```

### Step 4: 完成归档

验证通过后，文档会自动保存到指定位置：

```
✅ 文档验证完成

📁 文档已保存至：
haierren-server/docs/2026-02/0201-价值观提炼系统.md

下一步：开始编码实现
```

## 完整示例

### 用户输入

```
我需要实现"价值观提炼系统"，需求文档在：
docs/2026-02/价值观提炼系统-V7.0.md

请基于 haierren-server 的 cm-statis 包设计后端
请基于 wk_x_h5 设计前端
```

### Claude 响应

```
我来帮你将需求转化为技术文档。

首先，让我阅读需求文档...
[阅读文档内容]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 设计前确认
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

在开始设计方案前，我需要了解一些情况：

1. 已有资源：
   - 后端项目：haierren-server/cm-statis
   - 前端项目：wk_x_h5
   - 需求文档：docs/2026-02/价值观提炼系统-V7.0.md

2. 需要澄清的问题：

   问题1：关键词英文命名
   - 需求中多次提到"价值观提炼"
   - 建议使用 "CultureValue" 作为核心术语
   - 表名使用 cv_ 前缀
   - 是否可行？(y/n)

   问题2：数据来源
   - 社区分析：已有接口（请确认路径）
   - 访谈分析：需要新开发还是复用？
   - 档案分析：需要新开发还是复用？

   问题3：关于"草稿"功能
   - 需求文档中提到"草稿"状态
   - 是否确实需要？(因为会增加复杂度)

   请逐一回答上述问题...
```

### 设计阶段示例

```
根据你的回答，我开始设计方案：

## 技术组件要求

后端：
- Java 8
- MySQL 5.6（无外键、无约束）
- Redis 缓存
- MyBatis + PageHelper

前端：
- Vue 3 + TypeScript
- Element Plus
- request.js 封装

## 数据库设计

参考现有表结构，设计以下表：

1. cv_value（价值观表）
2. cv_value_word（关键词表）
3. cv_interview（访谈表）

每个表都包含：
- 逻辑删除字段（deleted）
- 创建人字段（creator，工号）
- 创建时间字段（create_time）

## API 接口设计

参考现有 Controller 风格：

1. POST /api/culture-value/analyze - 关键词分析
2. GET /api/culture-value/list - 分页查询
3. POST /api/culture-value/export - 导出

...
```

## 遵循的原则

### ✅ Claude 会做的

1. **先了解，后设计**
   - 阅读项目现有代码结构
   - 复用已有组件和工具类
   - 遵循项目编码规范

2. **不确定就问**
   - 列出所有不明确的点
   - 等待用户回答再继续
   - 绝不自作主张

3. **适度设计**
   - 只实现需求明确的功能
   - 不扩大需求范围
   - 不引入不需要的复杂度

4. **多轮验证**
   - 完成后让用户审核
   - 逐个模块确认
   - 及时修正问题

### ❌ Claude 不会做的

1. **不会**凭空设计不存在的功能
2. **不会**引入项目没有的依赖
3. **不会**猜测用户意图而不询问
4. **不会**使用占位符或示例数据
5. **不会**修改已有接口（除非必要）

## 最佳实践

### 需求文档准备

提供尽可能清晰的需求文档，包含：
- 功能描述
- 用户场景
- 交互流程图（可选）
- 业务规则

### 项目代码准备

确保可以访问：
- 后端项目源码
- 前端项目源码
- 数据库结构文档
- API 接口文档

### 沟通建议

- 及时回答 Claude 的问题
- 有异议立即提出
- 耐心进行多轮验证
- 确认后及时反馈

## 文件结构

```
requirement-to-tech-doc/
├── Skill.md           # Skill 核心定义
├── README.md          # 使用说明（本文档）
└── 示例/              # 示例文档（可选）
    └── 0101-价值观提炼系统.md
```

## 常见问题

### Q1: 如果我不确定某个技术选型怎么办？
A: Claude 会向你说明各个选项的优缺点，推荐一种方案，让你选择。

### Q2: 文档可以修改吗？
A: 当然可以。在验证阶段，你可以随时指出需要修改的地方。

### Q3: 可以只生成部分文档吗？
A: 可以。你可以让 Claude 只生成数据库设计或 API 设计。

### Q4: 生成的文档可以直接用于开发吗？
A: 可以。文档设计为可直接指导开发的详细程度。

## 与其他工具的配合

```
需求文档 ────────────────────────────────────────────────────▶ 技术文档
    ▲                                                      │
    │                                                      │
    │ Claude Code                                          │
    │ + requirement-to-tech-doc Skill ────────────────────┘
    │
    ▼
代码实现 ─────────────────────────────────────────────────────▶
    │
    │ Claude Code
    │ + asset-code-generator Skill
    │
    ▼
测试验证 ─────────────────────────────────────────────────────▶
```

## 更新日志

- **v1.0.0** (2026-02-10): 初始版本，完整工作流