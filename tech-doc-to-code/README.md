# 技术文档转代码

一个专为 Claude Code 设计的 Skill，根据技术文档生成可执行代码。

## 核心价值

| 问题 | 解决方案 |
|------|----------|
| 代码与文档脱节 | 严格按文档实现，有冲突明确告知 |
| 一次性实现太多 | 分步实现，每步检查确认 |
| 代码中 Mock 数据 | 只允许数据库 Mock，代码必须完整 |
| 实现不完整 | 外部接口标记 TODO，完成后列出所有 |
| 难以验证 | 生成 CURL 命令方便测试 |

## 工作流程

```
┌─────────────────────────────────────────────────────────────────┐
│                   技术文档转代码工作流                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌─────────┐    ┌─────────┐    ┌─────────┐                   │
│   │  阅读   │───▶│  计划   │───▶│  实现   │                   │
│   │  文档   │    │  确认   │    │  步骤1  │                   │
│   └─────────┘    └─────────┘    └────┬────┘                    │
│                                      │                         │
│                                      ▼                         │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                    循环：实现 → 验证 → 确认             │  │
│   └─────────────────────────────────────────────────────────┘  │
│                                      │                         │
│                                      ▼                         │
│   ┌─────────┐    ┌─────────┐    ┌─────────┐                   │
│   │ 全部    │───▶│ 编译    │───▶│ 完成    │                   │
│   │ 完成    │    │ 验证    │    │ 列出    │                   │
│   └─────────┘    └─────────┘    │ TODO    │                   │
│                                └─────────┘                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## 建议实现顺序

```
步骤1：共用核心模块
        │
        ├── 数据库表设计（DDL）
        └── 实体类（Entity）
        │
步骤2：功能一接口
        │
        ├── Controller
        ├── Service
        └── Mapper
        │
步骤3：功能一页面
        │
        ├── 页面组件
        └── API 调用封装
        │
步骤4：功能二接口
        │
        ├── Controller
        ├── Service（含业务逻辑）
        └── Mapper
        │
步骤5：功能二页面
        │
        ├── 页面组件
        └── 组件复用
```

## 使用方法

### 激活 Skill

直接向 Claude 表达你的需求：

```
"根据技术文档生成代码"
"按文档帮我写代码"
"帮我实现这个功能"
```

### Step 1：提供技术文档

你可以通过以下方式提供：

- **文件路径**：技术文档的完整路径
- **粘贴内容**：直接粘贴文档内容

**示例：**
```
我已经完成了技术文档，位于：
docs/2026-02/文化云"价值观提炼系统"-V7.0-技术方案.md

请根据以下项目结构实现：
- 后端：haierren-server/cm-statis
- 前端：wk_x_h5
```

### Step 2：制定实施计划

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 实施计划（共5步）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

步骤1：共用核心模块
├── 数据库表设计（DDL）
└── 实体类（Entity）

步骤2：功能一接口
├── CultureValueController
├── CultureValueService
└── CultureValueMapper

...

是否按此计划执行？(y/n)
```

### Step 3：分步实现

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 步骤1/5：共用核心模块
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[查看项目结构]
[编写代码]
[生成 SQL 文件]

✅ 步骤1代码已编写完成

📁 新建文件：
├── 后端实体类
└── SQL 文件

是否确认进入步骤2？(y/n)
```

### Step 4：接口测试（CURL）

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔧 接口测试 CURL 命令
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 关键词分析接口

curl -X POST "http://localhost:8080/api/culture-value/analyze" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {token}" \
  -d '{"content": "测试文本"}'
```

### Step 5：验证与完成

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 功能验证
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

问题1：用户录入内容后，是否触发分词处理？

Claude：在 CultureValueServiceImpl.analyzeAndSaveWord() 中实现

问题2：外部接口是否完整？

Claude：已标记 2 个 TODO：
- 分词服务接口调用
- 阿里云 OSS 上传

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
所有 TODO 已列出，请补充外部接口配置后进行测试。
```

## 完整示例

### 用户输入

```
技术文档在：docs/2026-02/价值观提炼系统-技术方案.md
后端项目：haierren-server/cm-statis
前端项目：wk_x_h5

请开始实现。
```

### Claude 响应

```
我来帮你根据技术文档生成代码。

首先，让我阅读技术文档...
[阅读文档内容]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 实施计划（共5步）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

步骤1：共用核心模块
├── 数据库表设计（DDL）
├── 实体类（Entity）
└── Mapper 接口

步骤2：功能一接口（关键词分析）
├── CultureValueController
├── CultureValueService
└── CultureValueMapper

步骤3：功能一页面
├── 首页
├── 关键词分析页面
└── API 封装

步骤4：功能二接口（档案管理）
├── ArchiveController
├── ArchiveService（含分词逻辑）
└── ArchiveMapper

步骤5：功能二页面
├── 档案列表
├── 档案上传
└── 档案详情

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
是否按此计划执行？(y/n)
```

### 用户确认后

```
✅ 开始执行步骤1：共用核心模块

[查看项目结构]
haierren-server/cm-statis/src/main/java/com/haier/culture/cm/
├── statis/
│   ├── controller/
│   ├── service/
│   ├── mapper/
│   └── entity/
└── StatisMain.java

参考现有实体：CvActivity.java、CvActivityDetail.java

正在编写代码...
[生成 SQL 和实体类]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 步骤1完成

📁 新建文件：
├── haierren-server/docs/sql/2026-02-10_culture_value.sql
├── haierren-server/.../entity/CvValue.java
├── haierren-server/.../entity/CvValueWord.java
└── haierren-server/.../entity/CvInterview.java

📝 修改文件：
└── haierren-server/.../mapper/SqlMapConfig.xml

是否确认进入步骤2？(y/n)
```

## 遵循的原则

### ✅ Claude 会做的

1. **严格按文档实现**
   - 有冲突时明确告知用户
   - 不擅自修改设计

2. **分步确认**
   - 每步完成后询问确认
   - 不一次性实现全部

3. **代码禁止 Mock**
   - 只允许数据库 Mock
   - 外部接口标记 TODO

4. **复用现有组件**
   - 参考项目现有代码
   - 遵循编码规范

5. **完整实现功能**
   - 除非外部依赖，否则完整实现
   - 完成后列出所有 TODO

### ❌ Claude 不会做的

1. **不会**一次性实现全部代码
2. **不会**在代码中 Mock 数据（仅数据库可 Mock）
3. **不会**忽略文档与代码的冲突
4. **不会**随意删除或回滚代码
5. **不会**使用 TODO 回避实现

## 文件放置规范

### 后端（Java）

```
haierren-server/
├── docs/sql/
│   └── YYYY-MM-DD_功能名称.sql          # 数据库表 DDL
└── cm-statis/src/main/java/com/haier/culture/cm/statis/
    ├── entity/
    │   └── CvXxx.java                   # 实体类
    ├── mapper/
    │   ├── CvXxxMapper.java            # Mapper 接口
    │   └── CvXxxMapper.xml             # Mapper XML
    ├── service/
    │   ├── CvXxxService.java           # Service 接口
    │   └── impl/
    │       └── CvXxxServiceImpl.java   # Service 实现
    └── controller/
        └── CvXxxController.java        # Controller
```

### 前端（Vue）

```
wk_x_h5/
└── src/
    ├── views/
    │   └── culture-value/              # 功能页面
    │       ├── index.vue               # 首页
    │       ├── analyze.vue             # 分析页
    │       └── archive.vue             # 档案页
    ├── api/
    │   └── culture-value.js            # API 封装
    └── components/
        └── upload/                     # 复用组件
```

## 常见问题

### Q1: 文档描述不明确怎么办？
A: 向用户询问，明确后再继续实现。

### Q2: 需要修改已存在的代码吗？
A: 谨慎操作，必须让用户确认。

### Q3: 外部接口如何处理？
A: 标记 TODO，使用模拟数据或空实现，列出所有待补充。

### Q4: 编译失败怎么办？
A: 使用 run-in-container skill 在容器中编译，修复错误后再继续。

### Q5: 数据库需要变更怎么办？
A: 生成 ALTER SQL 脚本，使用 database-query skill 执行。

## 与其他工具的配合

```
需求文档 ──────────────────────────────────────────────────────▶ 技术文档
    │                                                            │
    │ Claude Code                                                │
    │ + requirement-to-tech-doc Skill                            │
    ▼                                                            │
技术文档 ──────────────────────────────────────────────────────▶ 代码
    │                                                            │
    │ Claude Code                                                │
    │ + tech-doc-to-code Skill                                  │
    │                                                            │
    │ 需要编译时                                                 │
    ▼                                                            │
容器编译 ──────────────────────────────────────────────────────▶
    │                                                            │
    │ Claude Code                                                │
    │ + run-in-container Skill                                  │
    ▼                                                            │
数据库操作 ─────────────────────────────────────────────────────▶
    │                                                            │
    │ Claude Code                                                │
    │ + database-query Skill                                    │
```

## 文件结构

```
tech-doc-to-code/
├── Skill.md           # Skill 核心定义
└── README.md          # 使用说明（本文档）
```

## 更新日志

- **v1.0.0** (2026-02-10): 初始版本，完整工作流